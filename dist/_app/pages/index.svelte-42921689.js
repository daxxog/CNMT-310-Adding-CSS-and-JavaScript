import{S as qe,i as Te,s as Se,e as o,t as O,k as T,c as d,a as p,g as H,d as n,n as S,b as t,f as N,H as s,h as De,J as je,l as ke,K as Ce,I as pe,L as D,M as J,N as ee,O as Ve,P as Be,Q as Ne}from"../chunks/vendor-4c57f1eb.js";function Ae(c,a,i){const r=c.slice();return r[16]=a[i],r}function Re(c){let a,i,r,m,_,w,A,f,M=c[1].errors,b=[];for(let u=0;u<M.length;u+=1)b[u]=ye(Ae(c,M,u));return{c(){a=o("div"),i=o("span"),r=O("There were some problems with your registration."),m=T(),_=o("br"),w=o("br"),A=T(),f=o("ul");for(let u=0;u<b.length;u+=1)b[u].c();this.h()},l(u){a=d(u,"DIV",{class:!0});var v=p(a);i=d(v,"SPAN",{class:!0});var h=p(i);r=H(h,"There were some problems with your registration."),h.forEach(n),m=S(v),_=d(v,"BR",{}),w=d(v,"BR",{}),A=S(v),f=d(v,"UL",{});var R=p(f);for(let E=0;E<b.length;E+=1)b[E].l(R);R.forEach(n),v.forEach(n),this.h()},h(){t(i,"class","error-header svelte-1qgl1jd"),t(a,"class","error svelte-1qgl1jd")},m(u,v){N(u,a,v),s(a,i),s(i,r),s(a,m),s(a,_),s(a,w),s(a,A),s(a,f);for(let h=0;h<b.length;h+=1)b[h].m(f,null)},p(u,v){if(v&2){M=u[1].errors;let h;for(h=0;h<M.length;h+=1){const R=Ae(u,M,h);b[h]?b[h].p(R,v):(b[h]=ye(R),b[h].c(),b[h].m(f,null))}for(;h<b.length;h+=1)b[h].d(1);b.length=M.length}},d(u){u&&n(a),je(b,u)}}}function ye(c){let a,i=c[16]+"",r;return{c(){a=o("li"),r=O(i)},l(m){a=d(m,"LI",{});var _=p(a);r=H(_,i),_.forEach(n)},m(m,_){N(m,a,_),s(a,r)},p(m,_){_&2&&i!==(i=m[16]+"")&&De(r,i)},d(m){m&&n(a)}}}function Ue(c){let a,i,r,m;return{c(){a=o("div"),i=o("div"),r=o("span"),m=O("Thank you for registering!"),this.h()},l(_){a=d(_,"DIV",{class:!0});var w=p(a);i=d(w,"DIV",{class:!0});var A=p(i);r=d(A,"SPAN",{class:!0});var f=p(r);m=H(f,"Thank you for registering!"),f.forEach(n),A.forEach(n),w.forEach(n),this.h()},h(){t(r,"class","thanks svelte-1qgl1jd"),t(i,"class","twelve columns"),t(a,"class","row svelte-1qgl1jd")},m(_,w){N(_,a,w),s(a,i),s(i,r),s(r,m)},p:pe,d(_){_&&n(a)}}}function Le(c){let a,i,r,m,_,w,A,f,M,b,u,v,h,R,E,y,U,q,e,l,g,j,C,B,P,K,Q,L,Y,te,ie,oe,V,de,ne,F,z,ue,ce,G,W,fe,ve,me,he,_e;return{c(){a=o("form"),i=o("div"),r=o("div"),m=o("label"),_=O("Username:"),w=o("br"),A=T(),f=o("input"),M=o("br"),b=T(),u=o("div"),v=o("label"),h=O("Email address:"),R=o("br"),E=T(),y=o("input"),U=o("br"),q=T(),e=o("div"),l=o("div"),g=o("label"),j=O("Password:"),C=o("br"),B=T(),P=o("input"),K=o("br"),Q=T(),L=o("div"),Y=o("label"),te=O("Confirm password:"),ie=o("br"),oe=T(),V=o("input"),de=o("br"),ne=T(),F=o("div"),z=o("div"),ue=O("\xA0"),ce=T(),G=o("div"),W=o("button"),fe=O("Register"),ve=T(),me=o("br"),this.h()},l(I){a=d(I,"FORM",{});var k=p(a);i=d(k,"DIV",{class:!0});var se=p(i);r=d(se,"DIV",{class:!0});var X=p(r);m=d(X,"LABEL",{for:!0,class:!0});var be=p(m);_=H(be,"Username:"),be.forEach(n),w=d(X,"BR",{}),A=S(X),f=d(X,"INPUT",{class:!0,type:!0,id:!0,name:!0}),M=d(X,"BR",{}),X.forEach(n),b=S(se),u=d(se,"DIV",{class:!0});var Z=p(u);v=d(Z,"LABEL",{for:!0,class:!0});var Ee=p(v);h=H(Ee,"Email address:"),Ee.forEach(n),R=d(Z,"BR",{}),E=S(Z),y=d(Z,"INPUT",{class:!0,type:!0,id:!0,name:!0}),U=d(Z,"BR",{}),Z.forEach(n),se.forEach(n),q=S(k),e=d(k,"DIV",{class:!0});var re=p(e);l=d(re,"DIV",{class:!0});var $=p(l);g=d($,"LABEL",{for:!0,class:!0});var we=p(g);j=H(we,"Password:"),we.forEach(n),C=d($,"BR",{}),B=S($),P=d($,"INPUT",{class:!0,type:!0,id:!0,name:!0}),K=d($,"BR",{}),$.forEach(n),Q=S(re),L=d(re,"DIV",{class:!0});var x=p(L);Y=d(x,"LABEL",{for:!0,class:!0});var ge=p(Y);te=H(ge,"Confirm password:"),ge.forEach(n),ie=d(x,"BR",{}),oe=S(x),V=d(x,"INPUT",{class:!0,type:!0,id:!0,name:!0}),de=d(x,"BR",{}),x.forEach(n),re.forEach(n),ne=S(k),F=d(k,"DIV",{class:!0});var ae=p(F);z=d(ae,"DIV",{class:!0});var Ie=p(z);ue=H(Ie,"\xA0"),Ie.forEach(n),ce=S(ae),G=d(ae,"DIV",{class:!0});var le=p(G);W=d(le,"BUTTON",{class:!0,type:!0});var Pe=p(W);fe=H(Pe,"Register"),Pe.forEach(n),ve=S(le),me=d(le,"BR",{}),le.forEach(n),ae.forEach(n),k.forEach(n),this.h()},h(){t(m,"for","username"),t(m,"class","svelte-1qgl1jd"),D(m,"bad-label",c[1].isMarked("username")),t(f,"class","u-full-width svelte-1qgl1jd"),t(f,"type","text"),t(f,"id","username"),t(f,"name","username"),D(f,"bad-input",c[1].isMarked("username")),t(r,"class","six columns"),t(v,"for","emailAddress"),t(v,"class","svelte-1qgl1jd"),D(v,"bad-label",c[1].isMarked("emailAddress")),t(y,"class","u-full-width svelte-1qgl1jd"),t(y,"type","text"),t(y,"id","emailAddress"),t(y,"name","emailAddress"),D(y,"bad-input",c[1].isMarked("emailAddress")),t(u,"class","six columns"),t(i,"class","row svelte-1qgl1jd"),t(g,"for","password"),t(g,"class","svelte-1qgl1jd"),D(g,"bad-label",c[1].isMarked("password")),t(P,"class","u-full-width svelte-1qgl1jd"),t(P,"type","password"),t(P,"id","password"),t(P,"name","password"),D(P,"bad-input",c[1].isMarked("password")),t(l,"class","six columns"),t(Y,"for","confirmPassword"),t(Y,"class","svelte-1qgl1jd"),D(Y,"bad-label",c[1].isMarked("confirmPassword")),t(V,"class","u-full-width svelte-1qgl1jd"),t(V,"type","password"),t(V,"id","confirmPassword"),t(V,"name","confirmPassword"),D(V,"bad-input",c[1].isMarked("confirmPassword")),t(L,"class","six columns"),t(e,"class","row svelte-1qgl1jd"),t(z,"class","six columns"),t(W,"class","button-primary"),t(W,"type","submit"),W.value="register",t(G,"class","six columns"),t(F,"class","row svelte-1qgl1jd")},m(I,k){N(I,a,k),s(a,i),s(i,r),s(r,m),s(m,_),s(r,w),s(r,A),s(r,f),J(f,c[0].username),s(r,M),s(i,b),s(i,u),s(u,v),s(v,h),s(u,R),s(u,E),s(u,y),J(y,c[0].emailAddress),s(u,U),s(a,q),s(a,e),s(e,l),s(l,g),s(g,j),s(l,C),s(l,B),s(l,P),J(P,c[0].password),s(l,K),s(e,Q),s(e,L),s(L,Y),s(Y,te),s(L,ie),s(L,oe),s(L,V),J(V,c[0].confirmPassword),s(L,de),s(a,ne),s(a,F),s(F,z),s(z,ue),s(F,ce),s(F,G),s(G,W),s(W,fe),s(G,ve),s(G,me),he||(_e=[ee(f,"input",c[4]),ee(y,"input",c[5]),ee(P,"input",c[6]),ee(V,"input",c[7]),ee(a,"submit",Ve(c[3]))],he=!0)},p(I,k){k&2&&D(m,"bad-label",I[1].isMarked("username")),k&1&&f.value!==I[0].username&&J(f,I[0].username),k&2&&D(f,"bad-input",I[1].isMarked("username")),k&2&&D(v,"bad-label",I[1].isMarked("emailAddress")),k&1&&y.value!==I[0].emailAddress&&J(y,I[0].emailAddress),k&2&&D(y,"bad-input",I[1].isMarked("emailAddress")),k&2&&D(g,"bad-label",I[1].isMarked("password")),k&1&&P.value!==I[0].password&&J(P,I[0].password),k&2&&D(P,"bad-input",I[1].isMarked("password")),k&2&&D(Y,"bad-label",I[1].isMarked("confirmPassword")),k&1&&V.value!==I[0].confirmPassword&&J(V,I[0].confirmPassword),k&2&&D(V,"bad-input",I[1].isMarked("confirmPassword"))},d(I){I&&n(a),he=!1,Be(_e)}}}function Oe(c){let a,i,r,m,_,w,A,f,M,b,u,v,h,R,E=c[1].hasError&&Re(c);function y(e,l){return e[2]?Ue:Le}let U=y(c),q=U(c);return{c(){a=T(),i=o("div"),r=o("div"),m=o("br"),_=T(),w=o("div"),A=o("div"),f=o("h1"),M=O("User Registration"),b=T(),u=o("div"),v=o("div"),E&&E.c(),h=T(),q.c(),R=ke(),this.h()},l(e){Ce('[data-svelte="svelte-1y0f2is"]',document.head).forEach(n),a=S(e),i=d(e,"DIV",{class:!0});var g=p(i);r=d(g,"DIV",{class:!0});var j=p(r);m=d(j,"BR",{}),j.forEach(n),g.forEach(n),_=S(e),w=d(e,"DIV",{class:!0});var C=p(w);A=d(C,"DIV",{class:!0});var B=p(A);f=d(B,"H1",{});var P=p(f);M=H(P,"User Registration"),P.forEach(n),B.forEach(n),C.forEach(n),b=S(e),u=d(e,"DIV",{class:!0});var K=p(u);v=d(K,"DIV",{class:!0});var Q=p(v);E&&E.l(Q),Q.forEach(n),K.forEach(n),h=S(e),q.l(e),R=ke(),this.h()},h(){document.title="Week 7: JavaScript Validation and CSS",t(r,"class","twelve columns"),t(i,"class","row svelte-1qgl1jd"),t(A,"class","twelve columns"),t(w,"class","row svelte-1qgl1jd"),t(v,"class","twelve columns"),t(u,"class","row svelte-1qgl1jd")},m(e,l){N(e,a,l),N(e,i,l),s(i,r),s(r,m),N(e,_,l),N(e,w,l),s(w,A),s(A,f),s(f,M),N(e,b,l),N(e,u,l),s(u,v),E&&E.m(v,null),N(e,h,l),q.m(e,l),N(e,R,l)},p(e,[l]){e[1].hasError?E?E.p(e,l):(E=Re(e),E.c(),E.m(v,null)):E&&(E.d(1),E=null),U===(U=y(e))&&q?q.p(e,l):(q.d(1),q=U(e),q&&(q.c(),q.m(R.parentNode,R)))},i:pe,o:pe,d(e){e&&n(a),e&&n(i),e&&n(_),e&&n(w),e&&n(b),e&&n(u),E&&E.d(),e&&n(h),q.d(e),e&&n(R)}}}const He=0,Ye=1,Fe=2,Ge=3,We=4,Me="Something unexpected happened while processing your request. Please contact support@example.com for assistance.";function Je(c,a,i){const r={},m=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],_=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],w=["0","1","2","3","4","5","6","7","8","9"],A=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~"];class f{constructor(){this.errors=[],this.markedErrors={}}get hasError(){return this.errors.length!==0}async addError(l){this.errors.push(l)}isMarked(l){var g;return(g=this.markedErrors[l])!=null?g:!1}async markError(l){this.markedErrors[l]=!0}}let M=new f;class b{constructor(l){this.elementName=l.name,this.validateFunction=l.validate,this.errorMessage=l.errorMessage}async validate(l){var j;const g=await this.validateFunction((j=r[this.elementName])!=null?j:"");return g===!1&&(await l.markError(this.elementName),l.addError(this.errorMessage)),g}}const u=e=>m.includes(e)?He:_.includes(e)?Ye:w.includes(e)?Fe:A.includes(e)?Ge:We,v=[{name:"username",errorMessage:"Your username must be atleast three characters long.",validate:async e=>e.length>=3},{name:"emailAddress",errorMessage:"You must enter a valid email address.",validate:async e=>Ne(e)},{name:"password",errorMessage:"Password must be atleast 32 characters.",validate:async e=>e.length>=32},{name:"password",errorMessage:'Password must not repeat a character type (Number, ABC, abc, Special, Other) e.g. "ab" is an invalid sequence but "aB" is a valid sequence.',validate:async e=>e.length===0?!1:e.split("").map(u).reduce((l,g,j,C)=>j>1?l&&C[j-1]!==g:l!==g)},{name:"confirmPassword",errorMessage:"Passwords must match.",validate:async e=>e===r.password}].map(e=>new b(e));let h=!1;const R=async e=>{var j;const l=new f;if((await Promise.all(v.map(C=>C.validate(l)))).reduce((C,B)=>C&&B)===!0){const C=new FormData;for(const P in r)C.append(P,r[P]);const B=await fetch("./api/process-form.php",{method:"POST",body:C}).then(P=>P.json());if(typeof B=="object")l.addError((j=B.display_error)!=null?j:Me);else switch(B){case"good request":i(2,h=!0);break;case"bad request":default:l.addError(Me)}}i(1,M=l)};function E(){r.username=this.value,i(0,r)}function y(){r.emailAddress=this.value,i(0,r)}function U(){r.password=this.value,i(0,r)}function q(){r.confirmPassword=this.value,i(0,r)}return[r,M,h,R,E,y,U,q]}class Qe extends qe{constructor(a){super();Te(this,a,Je,Oe,Se,{})}}export{Qe as default};
